import React, { useState } from 'react';
import { Modal, Box, Tabs, Tab, Typography, TextField, Button } from '@mui/material';

// TabPanel component using const and arrow function
const TabPanel = (props) => {
  const { children, value, index, ...other } = props;

  return (
    <div
      role="tabpanel"
      hidden={value !== index}  // Only show the panel when the tab is active
      id={`simple-tabpanel-${index}`}
      aria-labelledby={`simple-tab-${index}`}
      {...other}
    >
      {value === index && (
        <Box sx={{ p: 3 }}>
          <Typography>{children}</Typography>
        </Box>
      )}
    </div>
  );
};

// ConfigModal component using const and arrow function
const ConfigModal = ({ open, handleClose }) => {
  const [tabValue, setTabValue] = useState(1);  // Default to "User Config"

  const handleTabChange = (event, newValue) => {
    setTabValue(newValue);  // Update the active tab when clicked
  };

  return (
    <Modal open={open} onClose={handleClose}>
      <Box
        sx={{
          position: 'absolute',
          top: '50%',
          left: '50%',
          transform: 'translate(-50%, -50%)',
          width: 400,
          bgcolor: 'background.paper',
          boxShadow: 24,
          p: 4,
          borderRadius: 2
        }}
      >
        <Tabs value={tabValue} onChange={handleTabChange}>
          <Tab label="Project Config" />
          <Tab label="User Config" />
        </Tabs>
        <TabPanel value={tabValue} index={0}>  // Project Config Tab Panel
          {/* Project Config Inputs */}
          <TextField fullWidth margin="normal" label="Sandra Env" defaultValue="rates_qa" />
          <TextField fullWidth margin="normal" label="Sandra Path" defaultValue="/Applications/qzratesqa/" />
          <TextField fullWidth margin="normal" label="Script Path" defaultValue="C:\\AutomationScripts\\UIAutomation\\" />
          <TextField fullWidth margin="normal" label="OpenFinDriver Path" defaultValue="C:\\AutomationScripts\\UIAutomation\\Appl" />
          <TextField fullWidth margin="normal" label="ChromeDriver Path" defaultValue="C:\\AutomationScripts\\UIAutomation\\Appl" />
        </TabPanel>
        <TabPanel value={tabValue} index={1}>  // User Config Tab Panel
          {/* User Config Inputs */}
          <TextField fullWidth margin="normal" label="Sandra Env" defaultValue="/Applications/qzratesqa/" />
          <TextField fullWidth margin="normal" label="Sandra Path" />
          <TextField fullWidth margin="normal" label="Script Path" />
          <TextField fullWidth margin="normal" label="OpenFinDriver Path" />
          <TextField fullWidth margin="normal" label="ChromeDriver Path" />
          <Button variant="contained" color="primary" sx={{ mt: 2 }}>
            Save
          </Button>
        </TabPanel>
      </Box>
    </Modal>
  );
};

export default ConfigModal;
